# 前端

重拾前端技术系列，包含 CSS、JS、browser API、TS（typescript）和前端工程化（工具链、测试、部署）等知识。

## CI/CD

- Continuous Integration，持续集成；
- Continuous Delivery，持续交付 / Continuous Deployment，持续部署
  - 持续交付：需要用户手动点击“部署”按钮才能部署到生产环境。
  - 持续部署：持续交付的更高阶段，自动化的部署到生产环境。

1. 编译（compile）和构建（build）

   编译是指将源代码变为目标代码的过程，从源代码的语言转变为另外一种计算机语言（一般为比源代码语言更为底层的语言）。
   
   构建是指一些列的处理，包括编译。不同的语言构建会有不通的处理步骤，最终产生可在具体特性环境运行的 artifact。
   less、sass 等转译为 css；typescript、coffeescript 等转译 javascript 。

   - 代码检查
   - 运行单元测试等
   - 语言编译
   - 依赖分析、打包、替换等
   - 代码压缩、spirit 图片压缩等
   - 版本生成

2. 构建产物（artifacts）

3. 部署、发布

   部署（deploy）是指把构建后的新版本应用或服务“安装”到目标环境（开发、测试或者生产）中。
   这时候部署好的应用或服务应该是在目标环境中正常运行着（或者待着），但是不会有任何访问的流量。
   
   发布（release）则是把新版本应用或者服务交付给最终用户使用的过程。相当于把流量切到部署好的新版本的过程。

- 蓝绿部署
  绿色代表代表正在给用户提供正常服务的系统；蓝色代表另外一套准备发布的系统，还未对外提供，可以做线上测试。

  二套系统必须有相同的基础设置和配置环境，当蓝色系统测试通过，达到上线标准，就把绿色系统的流量全部切到蓝色系统中，一旦蓝色系统出现问题，把所有流量切回到绿色系统中，待蓝色系统稳定后就成为新的绿色系统，之前的绿色系统资源就可以释放用于下一个蓝色系统。

  劣势：需要准备两套完全相同的基础环境

- 滚动部署

   有多个集群实例的服务中，在不影响服务的情况下，停止一个或多个实例，进行版本更新，再启动加入到集群中提供正常服务，直到所有实例都更新到   最新版本。

- 金丝雀发布（canary deployment）/灰度发布（gray deployment）

   与滚动部署相似，但是一种比滚动部署更有控制力度的发布策略。发布过程中，需要有一些流量控制（流量切分）的策略跟随部署的过程，一般可以在   负载均衡、路由、应用程序中做处理。

- A/B测试

   A/B测试指的是效果测试，**同一时间有多个版本的服务在线上运行**，并通过一定的策略控制多个版本的流量分配，最终通过信息的收集，分析各个   版本服务的实际效果，选出效果最好的版本。
   
   A/B测试强调的是通过不同版本对比效果来选择出最好的版本，而然金丝雀发布（灰度发布）的方式正好可以满足A/B测试的需求。

蓝绿部署和金丝雀是发布策略，目标是确保新上线的系统稳定，关注的是新系统的BUG、隐患。A/B测试是效果测试，同一时间有多个版本的服务对外服务，这些服务有差异但是没有新旧之分。
